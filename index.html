<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Hello World</title>
    <script src="https://unpkg.com/react@16/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@16/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/babel-standalone@6.15.0/babel.min.js"></script>
  </head>
  <body>
    <div id="root"></div>
    <script type="text/babel">

	class Main extends React.Component{
	  
	  constructor(props) {
	    super(props);
	    this.state = {
	      results : Array(9).fill(null),
	      searchKey : "",
	      result : "",
	    };
	  }
	  searchZidori(key){
	    var hits = new Array();
	    var r = new Array();
	    var data = {
		"地鶏" : "なんだこれは！",
		"烏骨鶏" : "微妙だよ！",
		"内鶏" : "おいしいよ！",
	    };
	　　　　Object.values(data).forEach(function(e,i,a){
		if(e.indexOf(key)!=-1){
			if(hits.indexOf(i)){
				hits.push(i);
				var k = Object.keys(data)[i];
				r.push({title : k,value : e});
			}
		}
	    });
	　　　　Object.keys(data).forEach(function(e,i,a){
		if(e.indexOf(key)!=-1){
			if(hits.indexOf(i)){
				hits.push(i);
				r.push({title : e , value : data[e]});
			}
		}
	    });
	    return r;
	  }
	  ifgSearch(key){
	    return this.searchZidori(key);
	  }

	  handleClick(e) {
	    var r = this.ifgSearch(this.state.searchKey);
	    var t = "";
	    console.log(r);
	    r.forEach(function(e,i,a){
		t += e["title"] + ":" + e["value"] + " ";
	    });
	    this.setState({result : t});
	  }

	  handleChange(e) {
	    this.setState({searchKey : document.getElementById("search").value });
	  }

	  render(){
	    return (
	      <span>
		<h1>Hello, world!</h1>
		<input　id="search" onChange={()=>this.handleChange()}></input>
		<button　onClick={()=>this.handleClick()}>検索</button>
		<br></br>
		{this.state.result}
	      </span>
	    );
	  }
	}
      ReactDOM.render(
        <Main />,
        document.getElementById('root')
      );

    </script>
    <!--
      Note: this page is a great way to try React but it's not suitable for production.
      It slowly compiles JSX with Babel in the browser and uses a large development build of React.

      To set up a production-ready React build environment, follow these instructions:
      * https://reactjs.org/docs/add-react-to-a-new-app.html
      * https://reactjs.org/docs/add-react-to-an-existing-app.html

      You can also use React without JSX, in which case you can remove Babel:
      * https://reactjs.org/docs/react-without-jsx.html
      * https://reactjs.org/docs/cdn-links.html
    -->
  </body>
</html>
